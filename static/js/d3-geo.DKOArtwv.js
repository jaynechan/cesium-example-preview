import{m as n}from"./d3-array.Dt_TFYEM.js";function t(){return new i}function i(){this.reset()}i.prototype={constructor:i,reset:function(){this.s=this.t=0},add:function(n){o(r,n,this.t),o(this,r.s,this.s),this.s?this.t+=r.t:this.s=r.t},valueOf:function(){return this.s}};var r=new i;function o(n,t,i){var r=n.s=t+i,o=r-t,e=r-o;n.t=t-e+(i-o)}var e=1e-6,u=Math.PI,f=u/2,l=u/4,a=2*u,c=180/u,p=u/180,s=Math.abs,v=Math.atan,h=Math.atan2,g=Math.cos,d=Math.sin,E=Math.sqrt;function S(n){return n>1?0:n<-1?u:Math.acos(n)}function y(n){return n>1?f:n<-1?-f:Math.asin(n)}function m(){}function M(n,t){n&&N.hasOwnProperty(n.type)&&N[n.type](n,t)}var x={Feature:function(n,t){M(n.geometry,t)},FeatureCollection:function(n,t){for(var i=n.features,r=-1,o=i.length;++r<o;)M(i[r].geometry,t)}},N={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var i=n.coordinates,r=-1,o=i.length;++r<o;)n=i[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){w(n.coordinates,t,0)},MultiLineString:function(n,t){for(var i=n.coordinates,r=-1,o=i.length;++r<o;)w(i[r],t,0)},Polygon:function(n,t){P(n.coordinates,t)},MultiPolygon:function(n,t){for(var i=n.coordinates,r=-1,o=i.length;++r<o;)P(i[r],t)},GeometryCollection:function(n,t){for(var i=n.geometries,r=-1,o=i.length;++r<o;)M(i[r],t)}};function w(n,t,i){var r,o=-1,e=n.length-i;for(t.lineStart();++o<e;)r=n[o],t.point(r[0],r[1],r[2]);t.lineEnd()}function P(n,t){var i=-1,r=n.length;for(t.polygonStart();++i<r;)w(n[i],t,1);t.polygonEnd()}function z(n){return[h(n[1],n[0]),y(n[2])]}function j(n){var t=n[0],i=n[1],r=g(i);return[r*g(t),r*d(t),d(i)]}function O(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function A(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function C(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function F(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function L(n){var t=E(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function b(n,t){function i(i,r){return i=n(i,r),t(i[0],i[1])}return n.invert&&t.invert&&(i.invert=function(i,r){return(i=t.invert(i,r))&&n.invert(i[0],i[1])}),i}function q(n,t){return[n>u?n-a:n<-u?n+a:n,t]}function G(n){return function(t,i){return[(t+=n)>u?t-a:t<-u?t+a:t,i]}}function I(n){var t=G(n);return t.invert=G(-n),t}function k(n,t){var i=g(n),r=d(n),o=g(t),e=d(t);function u(n,t){var u=g(t),f=g(n)*u,l=d(n)*u,a=d(t),c=a*i+f*r;return[h(l*o-c*e,f*i-a*r),y(c*o+l*e)]}return u.invert=function(n,t){var u=g(t),f=g(n)*u,l=d(n)*u,a=d(t),c=a*o-l*e;return[h(l*o+a*e,f*i+c*r),y(c*i-f*r)]},u}function B(n,t){(t=j(t))[0]-=n,L(t);var i=S(-t[1]);return((-t[2]<0?-i:i)+a-e)%a}function D(){var n,t=[];return{point:function(t,i){n.push([t,i])},lineStart:function(){t.push(n=[])},lineEnd:m,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function H(n,t){return s(n[0]-t[0])<e&&s(n[1]-t[1])<e}function J(n,t,i,r){this.x=n,this.z=t,this.o=i,this.e=r,this.v=!1,this.n=this.p=null}function K(n,t,i,r,o){var e,u,f=[],l=[];if(n.forEach((function(n){if(!((t=n.length-1)<=0)){var t,i,r=n[0],u=n[t];if(H(r,u)){for(o.lineStart(),e=0;e<t;++e)o.point((r=n[e])[0],r[1]);o.lineEnd()}else f.push(i=new J(r,n,null,!0)),l.push(i.o=new J(r,null,i,!1)),f.push(i=new J(u,n,null,!1)),l.push(i.o=new J(u,null,i,!0))}})),f.length){for(l.sort(t),Q(f),Q(l),e=0,u=l.length;e<u;++e)l[e].e=i=!i;for(var a,c,p=f[0];;){for(var s=p,v=!0;s.v;)if((s=s.n)===p)return;a=s.z,o.lineStart();do{if(s.v=s.o.v=!0,s.e){if(v)for(e=0,u=a.length;e<u;++e)o.point((c=a[e])[0],c[1]);else r(s.x,s.n.x,1,o);s=s.n}else{if(v)for(a=s.p.z,e=a.length-1;e>=0;--e)o.point((c=a[e])[0],c[1]);else r(s.x,s.p.x,-1,o);s=s.p}a=(s=s.o).z,v=!v}while(!s.v);o.lineEnd()}}}function Q(n){if(t=n.length){for(var t,i,r=0,o=n[0];++r<t;)o.n=i=n[r],i.p=o,o=i;o.n=i=n[0],i.p=o}}t(),t(),t(),q.invert=q;var R=1e9,T=-R;function U(t,i,r,o){function u(n,e){return t<=n&&n<=r&&i<=e&&e<=o}function f(n,e,u,f){var a=0,p=0;if(null==n||(a=l(n,u))!==(p=l(e,u))||c(n,e)<0^u>0)do{f.point(0===a||3===a?t:r,a>1?o:i)}while((a=(a+u+4)%4)!==p);else f.point(e[0],e[1])}function l(n,o){return s(n[0]-t)<e?o>0?0:3:s(n[0]-r)<e?o>0?2:1:s(n[1]-i)<e?o>0?1:0:o>0?3:2}function a(n,t){return c(n.x,t.x)}function c(n,t){var i=l(n,1),r=l(t,1);return i!==r?i-r:0===i?t[1]-n[1]:1===i?n[0]-t[0]:2===i?n[1]-t[1]:t[0]-n[0]}return function(e){var l,c,p,s,v,h,g,d,E,S,y,m=e,M=D(),x={point:N,lineStart:function(){x.point=w,c&&c.push(p=[]);S=!0,E=!1,g=d=NaN},lineEnd:function(){l&&(w(s,v),h&&E&&M.rejoin(),l.push(M.result()));x.point=N,E&&m.lineEnd()},polygonStart:function(){m=M,l=[],c=[],y=!0},polygonEnd:function(){var i=function(){for(var n=0,i=0,r=c.length;i<r;++i)for(var e,u,f=c[i],l=1,a=f.length,p=f[0],s=p[0],v=p[1];l<a;++l)e=s,u=v,s=(p=f[l])[0],v=p[1],u<=o?v>o&&(s-e)*(o-u)>(v-u)*(t-e)&&++n:v<=o&&(s-e)*(o-u)<(v-u)*(t-e)&&--n;return n}(),r=y&&i,u=(l=n(l)).length;(r||u)&&(e.polygonStart(),r&&(e.lineStart(),f(null,null,1,e),e.lineEnd()),u&&K(l,a,i,f,e),e.polygonEnd());m=e,l=c=p=null}};function N(n,t){u(n,t)&&m.point(n,t)}function w(n,e){var f=u(n,e);if(c&&p.push([n,e]),S)s=n,v=e,h=f,S=!1,f&&(m.lineStart(),m.point(n,e));else if(f&&E)m.point(n,e);else{var l=[g=Math.max(T,Math.min(R,g)),d=Math.max(T,Math.min(R,d))],a=[n=Math.max(T,Math.min(R,n)),e=Math.max(T,Math.min(R,e))];!function(n,t,i,r,o,e){var u,f=n[0],l=n[1],a=0,c=1,p=t[0]-f,s=t[1]-l;if(u=i-f,p||!(u>0)){if(u/=p,p<0){if(u<a)return;u<c&&(c=u)}else if(p>0){if(u>c)return;u>a&&(a=u)}if(u=o-f,p||!(u<0)){if(u/=p,p<0){if(u>c)return;u>a&&(a=u)}else if(p>0){if(u<a)return;u<c&&(c=u)}if(u=r-l,s||!(u>0)){if(u/=s,s<0){if(u<a)return;u<c&&(c=u)}else if(s>0){if(u>c)return;u>a&&(a=u)}if(u=e-l,s||!(u<0)){if(u/=s,s<0){if(u>c)return;u>a&&(a=u)}else if(s>0){if(u<a)return;u<c&&(c=u)}return a>0&&(n[0]=f+a*p,n[1]=l+a*s),c<1&&(t[0]=f+c*p,t[1]=l+c*s),!0}}}}}(l,a,t,i,r,o)?f&&(m.lineStart(),m.point(n,e),y=!1):(E||(m.lineStart(),m.point(l[0],l[1])),m.point(a[0],a[1]),f||m.lineEnd(),y=!1)}g=n,d=e,E=f}return x}}var V=t();function W(n){return n}t(),t(),t();var X=1/0,Y=X,Z=-X,$=Z,_={point:function(n,t){n<X&&(X=n);n>Z&&(Z=n);t<Y&&(Y=t);t>$&&($=t)},lineStart:m,lineEnd:m,polygonStart:m,polygonEnd:m,result:function(){var n=[[X,Y],[Z,$]];return Z=$=-(Y=X=1/0),n}};function nn(t,i,r,o){return function(f,c){var p,s,v,E=i(c),S=f.invert(o[0],o[1]),m=D(),M=i(m),x=!1,N={point:w,lineStart:z,lineEnd:O,polygonStart:function(){N.point=C,N.lineStart=F,N.lineEnd=b,s=[],p=[]},polygonEnd:function(){N.point=w,N.lineStart=z,N.lineEnd=O,s=n(s);var t=function(n,t){var i=t[0],r=t[1],o=[d(i),-g(i),0],f=0,c=0;V.reset();for(var p=0,s=n.length;p<s;++p)if(E=(v=n[p]).length)for(var v,E,S=v[E-1],m=S[0],M=S[1]/2+l,x=d(M),N=g(M),w=0;w<E;++w,m=z,x=C,N=F,S=P){var P=v[w],z=P[0],O=P[1]/2+l,C=d(O),F=g(O),b=z-m,q=b>=0?1:-1,G=q*b,I=G>u,k=x*C;if(V.add(h(k*q*d(G),N*F+k*g(G))),f+=I?b+q*a:b,I^m>=i^z>=i){var B=A(j(S),j(P));L(B);var D=A(o,B);L(D);var H=(I^b>=0?-1:1)*y(D[2]);(r>H||r===H&&(B[0]||B[1]))&&(c+=I^b>=0?1:-1)}}return(f<-e||f<e&&V<-e)^1&c}(p,S);s.length?(x||(c.polygonStart(),x=!0),K(s,rn,t,r,c)):t&&(x||(c.polygonStart(),x=!0),c.lineStart(),r(null,null,1,c),c.lineEnd()),x&&(c.polygonEnd(),x=!1),s=p=null},sphere:function(){c.polygonStart(),c.lineStart(),r(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function w(n,i){var r=f(n,i);t(n=r[0],i=r[1])&&c.point(n,i)}function P(n,t){var i=f(n,t);E.point(i[0],i[1])}function z(){N.point=P,E.lineStart()}function O(){N.point=w,E.lineEnd()}function C(n,t){v.push([n,t]);var i=f(n,t);M.point(i[0],i[1])}function F(){M.lineStart(),v=[]}function b(){C(v[0][0],v[0][1]),M.lineEnd();var n,t,i,r,o=M.clean(),e=m.result(),u=e.length;if(v.pop(),p.push(v),v=null,u)if(1&o){if((t=(i=e[0]).length-1)>0){for(x||(c.polygonStart(),x=!0),c.lineStart(),n=0;n<t;++n)c.point((r=i[n])[0],r[1]);c.lineEnd()}}else u>1&&2&o&&e.push(e.pop().concat(e.shift())),s.push(e.filter(tn))}return N}}function tn(n){return n.length>1}function rn(n,t){return((n=n.x)[0]<0?n[1]-f-e:f-n[1])-((t=t.x)[0]<0?t[1]-f-e:f-t[1])}t();const on=nn((function(){return!0}),(function(n){var t,i=NaN,r=NaN,o=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(l,a){var c=l>0?u:-u,p=s(l-i);s(p-u)<e?(n.point(i,r=(r+a)/2>0?f:-f),n.point(o,r),n.lineEnd(),n.lineStart(),n.point(c,r),n.point(l,r),t=0):o!==c&&p>=u&&(s(i-o)<e&&(i-=o*e),s(l-c)<e&&(l-=c*e),r=function(n,t,i,r){var o,u,f=d(n-i);return s(f)>e?v((d(t)*(u=g(r))*d(i)-d(r)*(o=g(t))*d(n))/(o*u*f)):(t+r)/2}(i,r,l,a),n.point(o,r),n.lineEnd(),n.lineStart(),n.point(c,r),t=0),n.point(i=l,r=a),o=c},lineEnd:function(){n.lineEnd(),i=r=NaN},clean:function(){return 2-t}}}),(function(n,t,i,r){var o;if(null==n)o=i*f,r.point(-u,o),r.point(0,o),r.point(u,o),r.point(u,0),r.point(u,-o),r.point(0,-o),r.point(-u,-o),r.point(-u,0),r.point(-u,o);else if(s(n[0]-t[0])>e){var l=n[0]<t[0]?u:-u;o=i*l/2,r.point(-l,o),r.point(0,o),r.point(l,o)}else r.point(t[0],t[1])}),[-u,-f]);function en(n,t){var i=g(n),r=i>0,o=s(i)>e;function f(n,t){return g(n)*g(t)>i}function l(n,t,r){var o=[1,0,0],f=A(j(n),j(t)),l=O(f,f),a=f[0],c=l-a*a;if(!c)return!r&&n;var p=i*l/c,v=-i*a/c,h=A(o,f),g=F(o,p);C(g,F(f,v));var d=h,S=O(g,d),y=O(d,d),m=S*S-y*(O(g,g)-1);if(!(m<0)){var M=E(m),x=F(d,(-S-M)/y);if(C(x,g),x=z(x),!r)return x;var N,w=n[0],P=t[0],L=n[1],b=t[1];P<w&&(N=w,w=P,P=N);var q=P-w,G=s(q-u)<e;if(!G&&b<L&&(N=L,L=b,b=N),G||q<e?G?L+b>0^x[1]<(s(x[0]-w)<e?L:b):L<=x[1]&&x[1]<=b:q>u^(w<=x[0]&&x[0]<=P)){var I=F(d,(-S+M)/y);return C(I,g),[x,z(I)]}}}function c(t,i){var o=r?n:u-n,e=0;return t<-o?e|=1:t>o&&(e|=2),i<-o?e|=4:i>o&&(e|=8),e}return nn(f,(function(n){var t,i,a,p,s;return{lineStart:function(){p=a=!1,s=1},point:function(v,h){var g,d=[v,h],E=f(v,h),S=r?E?0:c(v,h):E?c(v+(v<0?u:-u),h):0;if(!t&&(p=a=E)&&n.lineStart(),E!==a&&(!(g=l(t,d))||H(t,g)||H(d,g))&&(d[0]+=e,d[1]+=e,E=f(d[0],d[1])),E!==a)s=0,E?(n.lineStart(),g=l(d,t),n.point(g[0],g[1])):(g=l(t,d),n.point(g[0],g[1]),n.lineEnd()),t=g;else if(o&&t&&r^E){var y;S&i||!(y=l(d,t,!0))||(s=0,r?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!E||t&&H(t,d)||n.point(d[0],d[1]),t=d,a=E,i=S},lineEnd:function(){a&&n.lineEnd(),t=null},clean:function(){return s|(p&&a)<<1}}}),(function(i,r,o,e){!function(n,t,i,r,o,e){if(i){var u=g(t),f=d(t),l=r*i;null==o?(o=t+r*a,e=t-l/2):(o=B(u,o),e=B(u,e),(r>0?o<e:o>e)&&(o+=r*a));for(var c,p=o;r>0?p>e:p<e;p-=l)c=z([u,-f*g(p),-f*d(p)]),n.point(c[0],c[1])}}(e,n,t,o,i,r)}),r?[0,-n]:[-u,n-u])}function un(n){return function(t){var i=new fn;for(var r in n)i[r]=n[r];return i.stream=t,i}}function fn(){}function ln(n,t,i){var r=t[1][0]-t[0][0],o=t[1][1]-t[0][1],e=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),null!=e&&n.clipExtent(null),function(n,t){n&&x.hasOwnProperty(n.type)?x[n.type](n,t):M(n,t)}(i,n.stream(_));var u=_.result(),f=Math.min(r/(u[1][0]-u[0][0]),o/(u[1][1]-u[0][1])),l=+t[0][0]+(r-f*(u[1][0]+u[0][0]))/2,a=+t[0][1]+(o-f*(u[1][1]+u[0][1]))/2;return null!=e&&n.clipExtent(e),n.scale(150*f).translate([l,a])}fn.prototype={constructor:fn,point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var an=g(30*p);function cn(n,t){return+t?function(n,t){function i(r,o,u,f,l,a,c,p,v,g,d,S,m,M){var x=c-r,N=p-o,w=x*x+N*N;if(w>4*t&&m--){var P=f+g,z=l+d,j=a+S,O=E(P*P+z*z+j*j),A=y(j/=O),C=s(s(j)-1)<e||s(u-v)<e?(u+v)/2:h(z,P),F=n(C,A),L=F[0],b=F[1],q=L-r,G=b-o,I=N*q-x*G;(I*I/w>t||s((x*q+N*G)/w-.5)>.3||f*g+l*d+a*S<an)&&(i(r,o,u,f,l,a,L,b,C,P/=O,z/=O,j,m,M),M.point(L,b),i(L,b,C,P,z,j,c,p,v,g,d,S,m,M))}}return function(t){var r,o,e,u,f,l,a,c,p,s,v,h,g={point:d,lineStart:E,lineEnd:y,polygonStart:function(){t.polygonStart(),g.lineStart=m},polygonEnd:function(){t.polygonEnd(),g.lineStart=E}};function d(i,r){i=n(i,r),t.point(i[0],i[1])}function E(){c=NaN,g.point=S,t.lineStart()}function S(r,o){var e=j([r,o]),u=n(r,o);i(c,p,a,s,v,h,c=u[0],p=u[1],a=r,s=e[0],v=e[1],h=e[2],16,t),t.point(c,p)}function y(){g.point=d,t.lineEnd()}function m(){E(),g.point=M,g.lineEnd=x}function M(n,t){S(r=n,t),o=c,e=p,u=s,f=v,l=h,g.point=S}function x(){i(c,p,a,s,v,h,o,e,r,u,f,l,16,t),g.lineEnd=y,y()}return g}}(n,t):function(n){return un({point:function(t,i){t=n(t,i),this.stream.point(t[0],t[1])}})}(n)}var pn=un({point:function(n,t){this.stream.point(n*p,t*p)}});function sn(n){return function(n){var t,i,r,o,e,u,f,l,s,v,h=150,g=480,d=250,S=0,y=0,m=0,M=0,x=0,N=null,w=on,P=null,z=W,j=.5,O=cn(F,j);function A(n){return[(n=e(n[0]*p,n[1]*p))[0]*h+i,r-n[1]*h]}function C(n){return(n=e.invert((n[0]-i)/h,(r-n[1])/h))&&[n[0]*c,n[1]*c]}function F(n,o){return[(n=t(n,o))[0]*h+i,r-n[1]*h]}function L(){e=b(o=function(n,t,i){return(n%=a)?t||i?b(I(n),k(t,i)):I(n):t||i?k(t,i):q}(m,M,x),t);var n=t(S,y);return i=g-n[0]*h,r=d+n[1]*h,G()}function G(){return s=v=null,A}return A.stream=function(n){return s&&v===n?s:s=pn(w(o,O(z(v=n))))},A.clipAngle=function(n){return arguments.length?(w=+n?en(N=n*p,6*p):(N=null,on),G()):N*c},A.clipExtent=function(n){return arguments.length?(z=null==n?(P=u=f=l=null,W):U(P=+n[0][0],u=+n[0][1],f=+n[1][0],l=+n[1][1]),G()):null==P?null:[[P,u],[f,l]]},A.scale=function(n){return arguments.length?(h=+n,L()):h},A.translate=function(n){return arguments.length?(g=+n[0],d=+n[1],L()):[g,d]},A.center=function(n){return arguments.length?(S=n[0]%360*p,y=n[1]%360*p,L()):[S*c,y*c]},A.rotate=function(n){return arguments.length?(m=n[0]%360*p,M=n[1]%360*p,x=n.length>2?n[2]%360*p:0,L()):[m*c,M*c,x*c]},A.precision=function(n){return arguments.length?(O=cn(F,j=n*n),G()):E(j)},A.fitExtent=function(n,t){return ln(A,n,t)},A.fitSize=function(n,t){return function(n,t,i){return ln(n,[[0,0],t],i)}(A,n,t)},function(){return t=n.apply(this,arguments),A.invert=t.invert&&C,L()}}((function(){return n}))()}function vn(n){return function(t,i){var r=g(t),o=g(i),e=n(r*o);return[e*o*d(t),e*d(i)]}}function hn(n){return function(t,i){var r=E(t*t+i*i),o=n(r),e=d(o),u=g(o);return[h(t*e,r*u),y(r&&i*e/r)]}}vn((function(n){return E(2/(1+n))})).invert=hn((function(n){return 2*y(n/2)}));var gn=vn((function(n){return(n=S(n))&&n/d(n)}));function dn(){return sn(gn).scale(79.4188).clipAngle(179.999)}function En(n,t){return[n,t]}gn.invert=hn((function(n){return n})),En.invert=En;export{dn as g};
