import{g as J}from"./@turf.CPgb6OuJ.js";import{r as K}from"./rbush.CLeiUrJX.js";import{r as O}from"./tinyqueue.CiIUVAWw.js";import{p as U}from"./point-in-polygon.BrHNa-um.js";import{o as V}from"./robust-predicates.t9dwelUT.js";var q={exports:{}},j=K,S=O,W=U,Z=V.orient2d;S.default&&(S=S.default);q.exports=R;q.exports.default=R;function R(r,e,n){e=Math.max(0,e===void 0?2:e),n=n||0;var a=er(r),u=new j(16);u.toBBox=function(s){return{minX:s[0],minY:s[1],maxX:s[0],maxY:s[1]}},u.compareMinX=function(s,p){return s[0]-p[0]},u.compareMinY=function(s,p){return s[1]-p[1]},u.load(r);for(var t=[],v=0,f;v<a.length;v++){var i=a[v];u.remove(i),f=Q(i,f),t.push(f)}var l=new j(16);for(v=0;v<t.length;v++)l.insert(y(t[v]));for(var X=e*e,d=n*n;t.length;){var m=t.shift(),h=m.p,x=m.next.p,o=I(h,x);if(!(o<d)){var M=o/X;i=L(u,m.prev.p,h,x,m.next.next.p,M,l),i&&Math.min(I(i,h),I(i,x))<=M&&(t.push(m),t.push(Q(i,m)),u.remove(i),l.remove(m),l.insert(y(m)),l.insert(y(m.next)))}}m=f;var g=[];do g.push(m.p),m=m.next;while(m!==f);return g.push(m.p),g}function L(r,e,n,a,u,t,v){for(var f=new S([],T),i=r.data;i;){for(var l=0;l<i.children.length;l++){var X=i.children[l],d=i.leaf?N(X,n,a):b(n,a,X);d>t||f.push({node:X,dist:d})}for(;f.length&&!f.peek().node.children;){var m=f.pop(),h=m.node,x=N(h,e,n),o=N(h,a,u);if(m.dist<x&&m.dist<o&&F(n,h,v)&&F(a,h,v))return h}i=f.pop(),i&&(i=i.node)}return null}function T(r,e){return r.dist-e.dist}function b(r,e,n){if(k(r,n)||k(e,n))return 0;var a=E(r[0],r[1],e[0],e[1],n.minX,n.minY,n.maxX,n.minY);if(a===0)return 0;var u=E(r[0],r[1],e[0],e[1],n.minX,n.minY,n.minX,n.maxY);if(u===0)return 0;var t=E(r[0],r[1],e[0],e[1],n.maxX,n.minY,n.maxX,n.maxY);if(t===0)return 0;var v=E(r[0],r[1],e[0],e[1],n.minX,n.maxY,n.maxX,n.maxY);return v===0?0:Math.min(a,u,t,v)}function k(r,e){return r[0]>=e.minX&&r[0]<=e.maxX&&r[1]>=e.minY&&r[1]<=e.maxY}function F(r,e,n){for(var a=Math.min(r[0],e[0]),u=Math.min(r[1],e[1]),t=Math.max(r[0],e[0]),v=Math.max(r[1],e[1]),f=n.search({minX:a,minY:u,maxX:t,maxY:v}),i=0;i<f.length;i++)if(rr(f[i].p,f[i].next.p,r,e))return!1;return!0}function B(r,e,n){return Z(r[0],r[1],e[0],e[1],n[0],n[1])}function rr(r,e,n,a){return r!==a&&e!==n&&B(r,e,n)>0!=B(r,e,a)>0&&B(n,a,r)>0!=B(n,a,e)>0}function y(r){var e=r.p,n=r.next.p;return r.minX=Math.min(e[0],n[0]),r.minY=Math.min(e[1],n[1]),r.maxX=Math.max(e[0],n[0]),r.maxY=Math.max(e[1],n[1]),r}function er(r){for(var e=r[0],n=r[0],a=r[0],u=r[0],t=0;t<r.length;t++){var v=r[t];v[0]<e[0]&&(e=v),v[0]>a[0]&&(a=v),v[1]<n[1]&&(n=v),v[1]>u[1]&&(u=v)}var f=[e,n,a,u],i=f.slice();for(t=0;t<r.length;t++)W(r[t],f)||i.push(r[t]);return ar(i)}function Q(r,e){var n={p:r,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return e?(n.next=e.next,n.prev=e,e.next.prev=n,e.next=n):(n.prev=n,n.next=n),n}function I(r,e){var n=r[0]-e[0],a=r[1]-e[1];return n*n+a*a}function N(r,e,n){var a=e[0],u=e[1],t=n[0]-a,v=n[1]-u;if(t!==0||v!==0){var f=((r[0]-a)*t+(r[1]-u)*v)/(t*t+v*v);f>1?(a=n[0],u=n[1]):f>0&&(a+=t*f,u+=v*f)}return t=r[0]-a,v=r[1]-u,t*t+v*v}function E(r,e,n,a,u,t,v,f){var i=n-r,l=a-e,X=v-u,d=f-t,m=r-u,h=e-t,x=i*i+l*l,o=i*X+l*d,M=X*X+d*d,g=i*m+l*h,s=X*m+d*h,p=x*M-o*o,$,c,C,Y,w=p,D=p;p===0?(c=0,w=1,Y=s,D=M):(c=o*s-M*g,Y=x*s-o*g,c<0?(c=0,Y=s,D=M):c>w&&(c=w,Y=s+o,D=M)),Y<0?(Y=0,-g<0?c=0:-g>x?c=w:(c=-g,w=x)):Y>D&&(Y=D,-g+o<0?c=0:-g+o>x?c=w:(c=-g+o,w=x)),$=c===0?0:c/w,C=Y===0?0:Y/D;var _=(1-$)*r+$*n,z=(1-$)*e+$*a,A=(1-C)*u+C*v,G=(1-C)*t+C*f,H=A-_,P=G-z;return H*H+P*P}function nr(r,e){return r[0]===e[0]?r[1]-e[1]:r[0]-e[0]}function ar(r){r.sort(nr);for(var e=[],n=0;n<r.length;n++){for(;e.length>=2&&B(e[e.length-2],e[e.length-1],r[n])<=0;)e.pop();e.push(r[n])}for(var a=[],u=r.length-1;u>=0;u--){for(;a.length>=2&&B(a[a.length-2],a[a.length-1],r[u])<=0;)a.pop();a.push(r[u])}return a.pop(),e.pop(),e.concat(a)}var tr=q.exports;const lr=J(tr);export{lr as c};
