var d=Object.defineProperty,a=(n,e)=>d(n,"name",{value:e,configurable:!0}),f=class{constructor(e){this.direction=!1,this.compareProperties=!0;var r,t,o;this.precision=10**-((r=e==null?void 0:e.precision)!=null?r:17),this.direction=(t=e==null?void 0:e.direction)!=null?t:!1,this.compareProperties=(o=e==null?void 0:e.compareProperties)!=null?o:!0}compare(e,r){if(e.type!==r.type||!c(e,r))return!1;switch(e.type){case"Point":return this.compareCoord(e.coordinates,r.coordinates);case"LineString":return this.compareLine(e.coordinates,r.coordinates);case"Polygon":return this.comparePolygon(e,r);case"GeometryCollection":return this.compareGeometryCollection(e,r);case"Feature":return this.compareFeature(e,r);case"FeatureCollection":return this.compareFeatureCollection(e,r);default:if(e.type.startsWith("Multi")){const t=u(e),o=u(r);return t.every(i=>o.some(s=>this.compare(i,s)))}}return!1}compareCoord(e,r){return e.length===r.length&&e.every((t,o)=>Math.abs(t-r[o])<this.precision)}compareLine(e,r,t=0,o=!1){if(!c(e,r))return!1;const i=e;let s=r;if(o&&!this.compareCoord(i[0],s[0])){const m=this.fixStartIndex(s,i);if(m)s=m;else return!1}const l=this.compareCoord(i[t],s[t]);return this.direction||l?this.comparePath(i,s):this.compareCoord(i[t],s[s.length-(1+t)])?this.comparePath(i.slice().reverse(),s):!1}fixStartIndex(e,r){let t,o=-1;for(let i=0;i<e.length;i++)if(this.compareCoord(e[i],r[0])){o=i;break}return o>=0&&(t=[].concat(e.slice(o,e.length),e.slice(1,o+1))),t}comparePath(e,r){return e.every((t,o)=>this.compareCoord(t,r[o]))}comparePolygon(e,r){if(this.compareLine(e.coordinates[0],r.coordinates[0],1,!0)){const t=e.coordinates.slice(1,e.coordinates.length),o=r.coordinates.slice(1,r.coordinates.length);return t.every(i=>o.some(s=>this.compareLine(i,s,1,!0)))}return!1}compareGeometryCollection(e,r){return c(e.geometries,r.geometries)&&this.compareBBox(e,r)&&e.geometries.every((t,o)=>this.compare(t,r.geometries[o]))}compareFeature(e,r){return e.id===r.id&&(this.compareProperties?p(e.properties,r.properties):!0)&&this.compareBBox(e,r)&&this.compare(e.geometry,r.geometry)}compareFeatureCollection(e,r){return c(e.features,r.features)&&this.compareBBox(e,r)&&e.features.every((t,o)=>this.compare(t,r.features[o]))}compareBBox(e,r){return!e.bbox&&!r.bbox||(e.bbox&&r.bbox?this.compareCoord(e.bbox,r.bbox):!1)}};a(f,"GeojsonEquality");var y=f;function c(n,e){return n.coordinates?n.coordinates.length===e.coordinates.length:n.length===e.length}a(c,"sameLength");function u(n){return n.coordinates.map(e=>({type:n.type.replace("Multi",""),coordinates:e}))}a(u,"explode");function v(n,e,r){return new y(r).compare(n,e)}a(v,"geojsonEquality");function p(n,e){if(n===null&&e===null)return!0;if(n===null||e===null)return!1;const r=Object.keys(n),t=Object.keys(e);if(r.length!==t.length)return!1;for(var o of r){const i=n[o],s=e[o],l=h(i)&&h(s);if(l&&!p(i,s)||!l&&i!==s)return!1}return!0}a(p,"equal");var h=a(n=>n!=null&&typeof n=="object","isObject");export{v as g};
