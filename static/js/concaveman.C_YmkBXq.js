import{g as n}from"./@turf.Cn_N4SL6.js";import{r}from"./rbush.Cm0ENhIX.js";import{r as t}from"./tinyqueue.B6qAi_rB.js";import{p as e}from"./point-in-polygon.C3M42H71.js";import{o as a}from"./robust-predicates.C-q8R5im.js";var i={exports:{}},o=r,m=t,u=e,p=a.orient2d;function f(n,r,t){r=Math.max(0,void 0===r?2:r),t=t||0;var e=function(n){for(var r=n[0],t=n[0],e=n[0],a=n[0],i=0;i<n.length;i++){var o=n[i];o[0]<r[0]&&(r=o),o[0]>e[0]&&(e=o),o[1]<t[1]&&(t=o),o[1]>a[1]&&(a=o)}var m=[r,t,e,a],p=m.slice();for(i=0;i<n.length;i++)u(n[i],m)||p.push(n[i]);return function(n){n.sort(j);for(var r=[],t=0;t<n.length;t++){for(;r.length>=2&&c(r[r.length-2],r[r.length-1],n[t])<=0;)r.pop();r.push(n[t])}for(var e=[],a=n.length-1;a>=0;a--){for(;e.length>=2&&c(e[e.length-2],e[e.length-1],n[a])<=0;)e.pop();e.push(n[a])}return e.pop(),r.pop(),r.concat(e)}(p)}(n),a=new o(16);a.toBBox=function(n){return{minX:n[0],minY:n[1],maxX:n[0],maxY:n[1]}},a.compareMinX=function(n,r){return n[0]-r[0]},a.compareMinY=function(n,r){return n[1]-r[1]},a.load(n);for(var i,m=[],p=0;p<e.length;p++){var f=e[p];a.remove(f),i=X(f,i),m.push(i)}var x=new o(16);for(p=0;p<m.length;p++)x.insert(d(m[p]));for(var s=r*r,v=t*t;m.length;){var l=m.shift(),g=l.p,M=l.next.p,w=Y(g,M);if(!(w<v)){var b=w/s;(f=h(a,l.prev.p,g,M,l.next.next.p,b,x))&&Math.min(Y(f,g),Y(f,M))<=b&&(m.push(l),m.push(X(f,l)),a.remove(f),x.remove(l),x.insert(d(l)),x.insert(d(l.next)))}}l=i;var y=[];do{y.push(l.p),l=l.next}while(l!==i);return y.push(l.p),y}function h(n,r,t,e,a,i,o){for(var u=new m([],x),p=n.data;p;){for(var f=0;f<p.children.length;f++){var h=p.children[f],v=p.leaf?g(h,t,e):s(t,e,h);v>i||u.push({node:h,dist:v})}for(;u.length&&!u.peek().node.children;){var c=u.pop(),d=c.node,X=g(d,r,t),Y=g(d,e,a);if(c.dist<X&&c.dist<Y&&l(t,d,o)&&l(e,d,o))return d}(p=u.pop())&&(p=p.node)}return null}function x(n,r){return n.dist-r.dist}function s(n,r,t){if(v(n,t)||v(r,t))return 0;var e=M(n[0],n[1],r[0],r[1],t.minX,t.minY,t.maxX,t.minY);if(0===e)return 0;var a=M(n[0],n[1],r[0],r[1],t.minX,t.minY,t.minX,t.maxY);if(0===a)return 0;var i=M(n[0],n[1],r[0],r[1],t.maxX,t.minY,t.maxX,t.maxY);if(0===i)return 0;var o=M(n[0],n[1],r[0],r[1],t.minX,t.maxY,t.maxX,t.maxY);return 0===o?0:Math.min(e,a,i,o)}function v(n,r){return n[0]>=r.minX&&n[0]<=r.maxX&&n[1]>=r.minY&&n[1]<=r.maxY}function l(n,r,t){for(var e,a,i,o,m=Math.min(n[0],r[0]),u=Math.min(n[1],r[1]),p=Math.max(n[0],r[0]),f=Math.max(n[1],r[1]),h=t.search({minX:m,minY:u,maxX:p,maxY:f}),x=0;x<h.length;x++)if(e=h[x].p,a=h[x].next.p,i=n,e!==(o=r)&&a!==i&&c(e,a,i)>0!=c(e,a,o)>0&&c(i,o,e)>0!=c(i,o,a)>0)return!1;return!0}function c(n,r,t){return p(n[0],n[1],r[0],r[1],t[0],t[1])}function d(n){var r=n.p,t=n.next.p;return n.minX=Math.min(r[0],t[0]),n.minY=Math.min(r[1],t[1]),n.maxX=Math.max(r[0],t[0]),n.maxY=Math.max(r[1],t[1]),n}function X(n,r){var t={p:n,prev:null,next:null,minX:0,minY:0,maxX:0,maxY:0};return r?(t.next=r.next,t.prev=r,r.next.prev=t,r.next=t):(t.prev=t,t.next=t),t}function Y(n,r){var t=n[0]-r[0],e=n[1]-r[1];return t*t+e*e}function g(n,r,t){var e=r[0],a=r[1],i=t[0]-e,o=t[1]-a;if(0!==i||0!==o){var m=((n[0]-e)*i+(n[1]-a)*o)/(i*i+o*o);m>1?(e=t[0],a=t[1]):m>0&&(e+=i*m,a+=o*m)}return(i=n[0]-e)*i+(o=n[1]-a)*o}function M(n,r,t,e,a,i,o,m){var u,p,f,h,x=t-n,s=e-r,v=o-a,l=m-i,c=n-a,d=r-i,X=x*x+s*s,Y=x*v+s*l,g=v*v+l*l,M=x*c+s*d,j=v*c+l*d,w=X*g-Y*Y,b=w,y=w;0===w?(p=0,b=1,h=j,y=g):(h=X*j-Y*M,(p=Y*j-g*M)<0?(p=0,h=j,y=g):p>b&&(p=b,h=j+Y,y=g)),h<0?(h=0,-M<0?p=0:-M>X?p=b:(p=-M,b=X)):h>y&&(h=y,-M+Y<0?p=0:-M+Y>X?p=b:(p=-M+Y,b=X));var B=(1-(f=0===h?0:h/y))*a+f*o-((1-(u=0===p?0:p/b))*n+u*t),k=(1-f)*i+f*m-((1-u)*r+u*e);return B*B+k*k}function j(n,r){return n[0]===r[0]?n[1]-r[1]:n[0]-r[0]}m.default&&(m=m.default),i.exports=f,i.exports.default=f;const w=n(i.exports);export{w as c};
